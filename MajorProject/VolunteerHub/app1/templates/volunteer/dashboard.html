{% extends "base_volunteer.html" %}
{% block content %}

<style>
/* ---------- LAYOUT ---------- */
.lower-grid{
    display:grid;
    grid-template-columns:2fr 1fr;
    gap:24px;
    margin-top:30px;
}

@media(max-width:900px){
    .lower-grid{
        grid-template-columns:1fr;
    }
}

/* ---------- UPCOMING SERVICES ---------- */
.upcoming-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:20px;
    margin-top:16px;
}

.upcoming-card{
    background:white;
    padding:20px;
    border-radius:16px;
    box-shadow:0 14px 35px rgba(0,0,0,.08);
    transition:all .35s ease;
    animation:fadeUp .6s ease;
}

.upcoming-card:hover{
    transform:translateY(-6px);
    box-shadow:0 22px 55px rgba(79,70,229,.25);
}

.upcoming-card h4{
    margin:0 0 8px;
}

.view-btn{
    display:inline-block;
    margin-top:12px;
    color:#4f46e5;
    font-weight:600;
    text-decoration:none;
}

@keyframes fadeUp{
    from{opacity:0;transform:translateY(14px)}
    to{opacity:1;transform:translateY(0)}
}
</style>

<h1 class="welcome">
    Welcome, {{ profile.full_name }}! üëã
</h1>
<p class="subtitle">
    Track your volunteer journey and discover new opportunities
</p>

<!-- ================= STATS ================= -->
<div class="stats">

    <div class="stat-card green">
        <div class="icon">‚úî</div>
        <h2>{{ completed }}</h2>
        <p>Completed Services</p>
        <small>Start volunteering!</small>
    </div>

    <div class="stat-card blue">
        <div class="icon">üìÖ</div>
        <h2>N/A</h2>
        <p>Attendance Rate</p>
    </div>

    <div class="stat-card yellow">
        <div class="icon">‚≠ê</div>
        <h2>{{ profile.rating|default:"N/A" }}</h2>
        <p>Average Rating</p>
        <small>Complete services to get rated</small>
    </div>

    <div class="stat-card cyan">
        <div class="icon">‚è±</div>
        <h2>{{ upcoming_services|length }}</h2>
        <p>Upcoming Services</p>
    </div>

</div>

<!-- ================= LOWER GRID ================= -->
<div class="lower-grid">

    <!-- -------- UPCOMING SERVICES (LEFT) -------- -->
    <div class="card">
        <div class="card-header">
            <h3>Your Upcoming Services</h3>
            <a href="{% url 'volunteer_services' %}">View All ‚Üí</a>
        </div>

        {% if upcoming_services %}
            <div class="upcoming-grid">
                {% for s in upcoming_services %}
                    <div class="upcoming-card">
                         <h4>{{ s.service.title }}</h4>

 <p><strong>Organization:</strong> {{ s.organization.organization_name }}</p>
<p><strong>Email:</strong> {{ s.organization.user.email }}</p>

<p>üìç {{ s.service.location }}</p>
<p>üìÖ {{ s.service.date }}</p>



                        <a href="{% url 'volunteer_services' %}" class="view-btn">
                            View Details ‚Üí
                        </a>

                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-box">
                üìã
                <p>No upcoming services</p>
                <span>Apply for services to get started!</span>
            </div>
        {% endif %}
    </div>

    <!-- -------- PROGRESS (RIGHT) -------- -->
    <div class="card">
        <h3>Your Progress</h3>

        <p class="goal">
            Service Goal <b>{{ completed }}/10</b> completed
        </p>

        <div class="progress-bar">
           <div class="progress-fill" style="width: {{ completed|add:0 }}0%;"></div>

        </div>

        <div class="mini-stats">
            <div>
                <h2>{{ applied_count|default:0 }}</h2>
                <p>Applied</p>
            </div>
            <div>
                <h2>{{ selected_count|default:0 }}</h2>
                <p>Selected</p>
            </div>
        </div>
    </div>

</div>

{% endblock %}
